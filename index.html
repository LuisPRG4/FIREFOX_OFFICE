<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sistema Financiero Personal (SFP)</title>
  <link rel="icon" type="image/x-icon" href="recursos/ICONO.png">

 <link rel="stylesheet" href="styles.css?v=20250930" />
 <link rel="stylesheet" href="deudas.css?v=20250930" />
 <link rel="stylesheet" href="win11-theme.css?v=20250928">

 <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

</head>
<body>
  <div style="text-align:right; margin-bottom:.5rem;">
    <button id="btnTema" title="Cambiar tema">ğŸŒ“</button>
  </div>
  <h1 style="text-align:center; margin-bottom:1rem;">SISTEMA DE FINANZAS</h1>
  
  
  <div class="sidebar">

    <div class="sidebar-content">

    <aside class="win11-nav">
      <div class="nav-header">
        <img src="recursos/ICONO.png" class="nav-logo">
        <span class="nav-title">SFP</span>
        <div class="nav-search">
          <input type="text" id="navSearch" placeholder="ğŸ” Buscar pestaÃ±as..." />
        </div>
      </div>
    
      <nav class="side-tabs">

        <!-- DespuÃ©s de <nav class="side-tabs"> agregar: -->

<!-- FINANZAS -->
<div class="category-badge">ğŸ’° FINANZAS</div>
<button class="side-tab active" onclick="mostrarSideTab('dashboard')">
  <svg class="icon" viewBox="0 0 24 24" fill="#4F46E5">
    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
  </svg>
  Dashboard
</button>
<button class="side-tab" onclick="mostrarSideTab('movimientos')">
  <svg class="icon" viewBox="0 0 24 24" fill="#059669">
    <path d="M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z"/>
  </svg>
  Movimientos
</button>
<button class="side-tab" onclick="mostrarSideTab('analisis')">
  <svg class="icon" viewBox="0 0 24 24" fill="#DC2626">
    <path d="M3 3v18h18V3H3zm16 16H5V5h14v14zM7 7h4v10H7V7zm6 0h4v6h-4V7z"/>
  </svg>
  AnÃ¡lisis
</button>
<button class="side-tab" onclick="mostrarSideTab('presupuesto')">
  <svg class="icon" viewBox="0 0 24 24" fill="#EA580C">
    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
  </svg>
  Presupuesto
</button>

<div class="nav-category-separator"></div>

<!-- HERRAMIENTAS -->
<div class="category-badge">ğŸ› ï¸ HERRAMIENTAS</div>
<button class="side-tab" onclick="mostrarSideTab('herramientas')">
  <svg class="icon" viewBox="0 0 24 24" fill="#6B7280">
    <path d="M22.7 19l-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4z"/>
  </svg>
  Herramientas
</button>
<button class="side-tab" onclick="mostrarSideTab('calendario')">
  <svg class="icon" viewBox="0 0 24 24" fill="#2563EB">
    <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"/>
  </svg>
  Calendario
</button>
<button class="side-tab" onclick="mostrarSideTab('inversiones')">
  <svg class="icon" viewBox="0 0 24 24" fill="#16A34A">
    <path d="M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.3L22 12V6z"/>
  </svg>
  Inversiones
</button>
<button class="side-tab" onclick="mostrarSideTab('deudas')">
  <svg class="icon" viewBox="0 0 24 24" fill="#8B5CF6">
    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
  </svg>
  Deudas
</button>

<div class="nav-category-separator"></div>

<!-- CONFIGURACIÃ“N -->
<div class="category-badge">âš™ï¸ CONFIGURACIÃ“N</div>
<button class="side-tab" onclick="mostrarSideTab('config')">
  <svg class="icon" viewBox="0 0 24 24" fill="#6B7280">
    <path d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.65 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z"/>
  </svg>
  ConfiguraciÃ³n
</button>
<button class="side-tab" onclick="mostrarSideTab('cambios')">
  <svg class="icon" viewBox="0 0 24 24" fill="#CA8A04">
    <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
  </svg>
  Cambios
</button>
      </nav>

    <footer class="nav-footer">
      <button class="nav-toggle" title="Contraer menÃº">â˜°</button>
    </footer>
  </aside>

  <div class="side-content active" id="side-dashboard">
    <div class="sidebar-content">
      <section id="buscador">

        <input type="text" id="txtBuscar" placeholder="ğŸ” Buscar..." />
      </section>


      <section id="resumen">

        <h2>Resumen 
    <button onclick="mostrarAyudaDashboard()" 
            style="background:none; border:none; color:var(--primary); font-size:1rem; cursor:pointer; margin-left:0.5rem; padding:0.25rem; border-radius:50%; transition:background 0.2s;"
            title="Â¿QuÃ© significa cada secciÃ³n?">â“</button>
</h2>

        <p>Saldo actual: <strong id="saldo">Bs. 0,00</strong></p>
  <p id="saldoAviso" style="font-size: 0.875rem; color: var(--text-light); margin-top: 0.25rem; display: none;">
  ğŸ’¡ Este saldo incluye una comisiÃ³n del 0.3% aplicada automÃ¡ticamente a cada gasto.
  </p>

  <div style="text-align: center; margin-top: 1rem; font-size: 0.875rem; color: var(--text-light);">
    <span>VersiÃ³n del sistema: </span><span id="versionDashboard" style="font-weight: 600; color: var(--primary);">1.0.4</span>
</div>

  <p style="font-size:0.85rem; color:var(--text-light); margin-top:0.5rem;">
  ğŸ“ <strong>Â¿Cuidas tus datos?</strong> Haz un backup: <a href="#" onclick="exportarBackup()" style="color:var(--primary); text-decoration:underline;">Exportar</a>
  </p>
        <div style="margin-top: 1rem; display: flex; gap: 1rem; flex-wrap: wrap; align-items: center;">
          <label style="font-size: 0.875rem; color: var(--text-light);">
            Convertir a:
            <select id="monedaDestino">
              <option value="USD">DÃ³lar (USD)</option>
              <option value="EUR">Euro (EUR)</option>
              <option value="COP">Peso Colombiano (COP)</option>
              <option value="ARS">Peso Argentino (ARS)</option>
              <option value="MXN">Peso Mexicano (MXN)</option>
            </select>
          </label>


          <label style="font-size: 0.875rem; color: var(--text-light);">
    Tasa del dÃ­a (Bs): 
    <input type="text" id="tasaCambio" 
           placeholder="Ej: 169,98 o 8333,33" 
           style="width: 100px; padding: 0.5rem; font-size: 1rem; border:1px solid #ccc; border-radius:8px;"
           title="Ingresa la tasa como la ves en tu app de banco: 169,98, 8.333,33, 8333.33 â€” Â¡no se formatea!" />
    <div id="tasaActual" style="font-size: 0.875rem; color: var(--text-light); margin-top: 0.25rem;">
      Tasa actual: 1 USD = 0,00 Bs
    </div>
</label>


          <div style="font-weight: 500; font-size: 1.1rem;">
            Equivalente: <span id="equivalente">--</span>
          </div>
        </div>
      </section>

<!-- WIDGETS PERSONALIZABLES -->
<section id="widgetsPersonalizables">
  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
    <h2>ğŸ“Š Widgets Personalizables
      <button onclick="mostrarAyudaWidgets()"
              style="background:none; border:none; color:var(--primary); font-size:1rem; cursor:pointer; margin-left:0.5rem; padding:0.25rem; border-radius:50%; transition:background 0.2s;"
              title="Â¿CÃ³mo personalizar los widgets?">â“</button>
    </h2>
    <div style="display: flex; gap: 0.5rem;">
      <button onclick="mostrarConfiguracionWidgets()" id="btnConfigWidgets"
              style="padding: 0.5rem; background: var(--primary); color: white; border: none; border-radius: 6px; font-size: 0.8rem; cursor: pointer;"
              title="Configurar widgets">âš™ï¸</button>
      <button onclick="agregarWidget()" id="btnAgregarWidget"
              style="padding: 0.5rem; background: var(--success); color: white; border: none; border-radius: 6px; font-size: 0.8rem; cursor: pointer;"
              title="Agregar nuevo widget">â•</button>
    </div>
  </div>

  <div id="contenedorWidgets" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1rem; margin-bottom: 1rem;">
    <!-- Los widgets se cargarÃ¡n dinÃ¡micamente aquÃ­ -->
  </div>

  <div id="mensajeSinWidgets" style="text-align: center; padding: 2rem; color: var(--text-light); display: none;">
    <p>ğŸ“­ No tienes widgets personalizados aÃºn.</p>
    <p>Haz clic en "â•" para agregar tu primer widget.</p>
  </div>
</section>

      <section id="alertaSaldo" style="display:none;">
        <p style="color:var(--danger); font-weight:500;">
          âš ï¸ Tu saldo estÃ¡ por debajo de Bs. <span id="umbralAlerta">500</span>
        </p>
      </section>
      <section id="disponibilidad">
        <h2>Disponibilidad total</h2>
        <p><strong>Bs. <span id="totalGeneral">0,00</span></strong> en todos los bancos</p>
      </section>
      <section id="ingGastPorBanco">
        <h2>Ingresos vs Gastos por banco</h2>
        <table id="tablaBancos" style="width:100%; border-collapse:collapse;">
  <thead>
    <tr style="border-bottom:1px solid var(--text-light);">
      <th style="text-align:left;">Banco</th>
      <th style="text-align:right;">Saldo inicial</th>
      <th style="text-align:right;">Ingresos</th>
      <th style="text-align:right;">Gastos</th>
      <th style="text-align:right;">Saldo final</th>
    </tr>
  </thead>
  <tbody></tbody>
  </table>

</section>
</div> <!-- cierre sidebar-content -->
</div>


<div class="side-content" id="side-movimientos">
  <div class="sidebar-content">
    <section>


      <h2>Agregar Movimiento 
        <button onclick="mostrarAyudaMovimientos()" 
                style="background:none; border:none; color:var(--primary); font-size:1rem; cursor:pointer; margin-left:0.5rem; padding:0.25rem; border-radius:50%; transition:background 0.2s;"
                title="Â¿CÃ³mo agregar y gestionar movimientos?">â“</button>
    </h2>

        <label for="saldoInicial">Saldo Inicial (opcional, solo se aplica una vez):
          <input type="text" id="saldoInicial" placeholder="Ej: 3.220,90" style="width:100%; padding:.75rem; border:1px solid #ccc; border-radius:8px; font-size:1rem;" />

          <!-- Debajo de <input type="text" id="saldoInicial" ... /> -->
          <div id="avisoModoSaldo" style="font-size:0.75rem; color:var(--text-light); margin-top:0.25rem; display:none;">
            ğŸ“Œ Modo: <strong id="modoActualSaldo">AutomÃ¡tico</strong>
          </div>

        </label>
        <input type="text" id="concepto" placeholder="Concepto" />
        <input type="text" id="cantidad" placeholder="Ej: 3.000,77" />

          <!-- Debajo de <input type="text" id="cantidad" ... /> -->
          <div id="avisoModoCantidad" style="font-size:0.75rem; color:var(--text-light); margin-top:0.25rem; display:none;">
            ğŸ“Œ Modo: <strong id="modoActualCantidad">AutomÃ¡tico</strong>
          </div>

        <select id="tipo">
          <option value="ingreso">Ingreso</option>
          <option value="gasto">Gasto</option>
          <option value="saldo_inicial">Saldo Inicial</option>
        </select>
        <label>CategorÃ­a:
          <div style="display:flex; gap:.5rem;">
            <select id="categoria">
              <option value="">(automÃ¡tica)</option>
              <option value="Otro">+ Nuevaâ€¦</option>
            </select>
            <button onclick="agregarCategoria()" style="padding:.5rem; border:none; background:#0b57d0; color:white; border-radius:50%; width:2rem; height:2rem; font-size:1rem;">+</button>
          </div>
        </label>
        <input type="text" id="nuevaCategoria" placeholder="Nombre nueva categorÃ­a" style="display:none;" />
        <label>Banco:
          <div style="display:flex; gap:.5rem;">
            <select id="banco">
              <option value="">(Sin banco)</option>
              <option value="Otro">+ Nuevoâ€¦</option>
            </select>
            <button onclick="agregarBanco()" style="padding:.5rem; border:none; background:#0b57d0; color:white; border-radius:50%; width:2rem; height:2rem; font-size:1rem;">+</button>
          </div>
        </label>
        <input type="text" id="nuevoBanco" placeholder="Nombre del banco" style="display:none;" />


        <label>Fecha:
          <input type="date" id="fechaMov" />
        </label>

        <label style="margin-top: 1rem;">
      ğŸ“¸ Adjuntar recibo (opcional):
    <input type="file" id="recibo" accept="image/*,.pdf" style="padding:0.5rem; border:1px solid #ccc; border-radius:8px; width:100%;">
    </label>
    <p style="font-size:0.8rem; color:var(--text-light); margin-top:0.25rem;">
      ğŸ“ Soporta: JPG, PNG, PDF. No se sube a internet. Solo se guarda en tu dispositivo.
    </p>

        <div class="btn-group">
            <button onclick="agregarMovimiento()" id="btnAgregar">Agregar</button>
            <button onclick="actualizarMovimiento()" id="btnActualizar" style="display:none;">Guardar cambios</button>
            <button onclick="cancelarEdicion()" id="btnCancelarEdicion" style="display:none;">Cancelar</button>
        </div>
      </section>
      <section>
        <h2>
        Movimientos
        <button id="btnToggleLista" onclick="toggleLista()">
            <span id="iconoFlecha">â–¼</span>
        </button> 
    </h2>

    <!-- Buscador especÃ­fico para movimientos -->
<div style="margin-bottom: 1rem;">
  <input type="text" id="buscadorMovimientos" placeholder="ğŸ” Buscar movimientos por concepto, categorÃ­a o banco..." 
         style="width: 100%; padding: 0.75rem; border: 1px solid #ccc; border-radius: 8px; font-size: 1rem;" />
</div>
    
        <div id="listaContenedor" style="display: none;">
        <ul id="listaMovimientos"></ul>
        <div id="controlesPaginacion" style="margin-top: 1rem; text-align: center;"></div>
    </div>
        <div id="controlesPaginacion" style="margin-top: 1rem; text-align: center;"></div>
      </section>
      <div class="button-center">
        <button id="botonReporte" onclick="mostrarModalReporte()" style="display:none;">ğŸ“„ Generar Reporte</button>

  <!-- Modal para selecciÃ³n de tipo de reporte -->
  <div id="modalReporte" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:1000; justify-content:center; align-items:center;">
    <div style="background:var(--card-bg); border-radius:var(--radius); box-shadow:var(--shadow-lg); padding:2rem; max-width:400px; width:90%; margin:2rem;">
        <h2 style="text-align:center; margin-bottom:1.5rem;">ğŸ“‹ Tipo de Reporte</h2>
        <div style="display:flex; flex-direction:column; gap:1rem;">

            <button onclick="generarReporteGeneral()" style="padding:1rem; border:none; border-radius:8px; background:#0b57d0; color:white; font-size:1rem; cursor:pointer; transition:background .2s;">
    ğŸ“„ Reporte General (Todo)
</button>

            <button onclick="mostrarSeleccionCategoria()" style="padding:1rem; border:none; border-radius:8px; background:#018642; color:white; font-size:1rem; cursor:pointer; transition:background .2s;">
    ğŸ·ï¸ Reporte por CategorÃ­a
</button>

            <button onclick="mostrarSeleccionFecha()" style="padding:1rem; border:none; border-radius:8px; background:#ff9800; color:white; font-size:1rem; cursor:pointer; transition:background .2s;">
    ğŸ“… Reporte por Fecha
</button>
        </div>
        <button onclick="cerrarModalReporte()" style="margin-top:1.5rem; padding:0.75rem; border:none; border-radius:8px; background:var(--danger); color:white; font-size:0.9rem; cursor:pointer; width:100%;">
            âŒ Cancelar
        </button>
    </div>
  </div>

  <!-- Formulario oculto para seleccionar categorÃ­a -->
  <div id="formCategoria" style="display:none;">
    <select id="selectCategoriaReporte">
        <option value="">Selecciona una categorÃ­a</option>
    </select>
    <button onclick="generarReportePorCategoria()">Generar</button>
    <button onclick="cerrarFormCategoria()">Cancelar</button>
  </div>

  <!-- Formulario oculto para seleccionar fechas -->
  <div id="formFecha" style="display:none;">
    <label>Desde: <input type="date" id="fechaDesde"></label>
    <label>Hasta: <input type="date" id="fechaHasta"></label>
    <button onclick="generarReportePorFecha()">Generar</button>
    <button onclick="cerrarFormFecha()">Cancelar</button>
  </div>
      </div>
      <div class="button-center">
        <button onclick="exportarExcel()">ğŸ“Š Exportar Excel</button>

      </div>
    </div> <!-- cierre sidebar-content -->
  </div>


  <div class="side-content" id="side-analisis">
    <div class="sidebar-content">
      <section id="grafico">

        <h2>Gastos por categorÃ­a 
          <button onclick="mostrarAyudaAnalisis()" 
                  style="background:none; border:none; color:var(--primary); font-size:1rem; cursor:pointer; margin-left:0.5rem; padding:0.25rem; border-radius:50%; transition:background 0.2s;"
                  title="Â¿CÃ³mo interpretar los grÃ¡ficos?">â“</button>
      </h2>

        <canvas id="torta" style="max-width:100%; height:auto;"></canvas>
      </section>
      <section id="barras">
        <h2>Resumen mensual</h2>
        <canvas id="barChart" style="max-width:100%; height:auto;"></canvas>
      </section>
      <section id="resumenBancos">
        <h2>Resumen por banco</h2>
        <select id="filtroBanco">
          <option value="">Todos los bancos</option>
        </select>
        <ul id="listaBancos"></ul>


            </section>
      </div> <!-- cierre sidebar-content -->
    </div>




    <div class="side-content" id="side-presupuesto">
      <div class="sidebar-content">
        <section id="presupuestoMeta">

          <h2>ğŸ¯ Meta de Presupuesto 
            <button onclick="mostrarAyudaPresupuesto()" 
                    style="background:none; border:none; color:var(--primary); font-size:1rem; cursor:pointer; margin-left:0.5rem; padding:0.25rem; border-radius:50%; transition:background 0.2s;"
                    title="Â¿CÃ³mo funciona esta pestaÃ±a?">â“</button>
        </h2>

  <p style="margin-bottom: 1rem; color: var(--text-light);">Define tu meta mensual y tu progreso actual.</p>
  <div style="display:flex; gap:1rem; margin-bottom:1.5rem;">
    <div style="flex:1;">
      <label for="metaPresupuesto">Meta mensual (Bs):</label>
      <input type="number" id="metaPresupuesto" placeholder="Ej: 20000" step="100" min="0" />
    </div>
    <div style="flex:1;">
      <label for="presupuestoActual">Gasto actual (Bs):</label>
      <input type="text" id="presupuestoActual" placeholder="AutomÃ¡tico" readonly style="background:var(--card-bg); color:var(--text-light); cursor:not-allowed; font-family: 'Space Mono', monospace; text-align: right;" />
    </div>
  </div>
  <div style="display:flex; gap:0.75rem; margin-bottom:1.5rem;">
    <button onclick="guardarMetaPresupuesto()" style="flex:1; background:#0b57d0; color:white; border:none; border-radius:8px; padding:0.75rem; font-size:0.9rem;">ğŸ’¾ Guardar Meta</button>
    <button onclick="eliminarMetaPresupuesto()" style="flex:1; background:#b00020; color:white; border:none; border-radius:8px; padding:0.75rem; font-size:0.9rem; opacity:0.9; transition:opacity 0.2s;">ğŸ—‘ï¸ Eliminar Meta</button>
  </div>
  </section>

      <section id="presupuestoGrafico">
        <h2>ğŸ“Š Progreso del Presupuesto</h2>
        <div style="background:var(--card-bg); border-radius:var(--radius); padding:1.5rem; box-shadow:var(--shadow-sm); margin-bottom:1.5rem;">
          <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:1rem;">
            <span style="font-weight:500;">Gasto actual</span>
            <span id="progresoTexto" style="font-weight:700; color:var(--text);">0%</span>
          </div>
          <div style="height:20px; background:#e0e0e0; border-radius:10px; overflow:hidden; margin-bottom:1rem;">
            <div id="barraProgreso" style="height:100%; width:0%; background:linear-gradient(90deg, #018642, #0b57d0); transition:width 0.5s ease;"></div>
          </div>
          <div style="display:flex; justify-content:space-between; font-size:0.875rem; color:var(--text-light);">
            <span>Meta: <span id="metaTexto">Bs. 0</span></span>
            <span>Gastado: <span id="gastadoTexto">Bs. 0</span></span>
          </div>
        </div>
      </section>

      <section id="presupuestoDetalles">
        <h2>ğŸ“Š Gastos por categorÃ­a (Ãºltimos 30 dÃ­as)</h2>

  <ul id="listaPresupuestoDetalles" style="padding: 0; margin: 0;"></ul>

  <div style="text-align:center; margin-top:1rem;">
    <button onclick="actualizarPresupuesto()" style="background:#0b57d0; color:white; border:none; border-radius:8px; padding:0.5rem 1rem; font-size:0.9rem;">Actualizar</button>
  </div>
  <p id="leyendaPresupuesto" style="margin-top:1.5rem; font-size:0.85rem; color:var(--text-light); text-align:center; font-style:italic; max-width:400px; margin-left:auto; margin-right:auto; display:none;">
    ğŸ“Œ <strong>Â¿Sin meta?</strong> Esta pestaÃ±a muestra tu gasto real. Define una meta para ver tu progreso.
  </p>

</section>
</div> <!-- cierre sidebar-content -->
</div>

    <!-- (FORMATEADOR DE NÃšMEROS) -->
    <div class="side-content" id="side-herramientas">
      <div class="sidebar-content">
        <section>

          <h2>ğŸ› ï¸ Formateador de NÃºmeros 
            <button onclick="mostrarAyudaHerramientas()" 
                    style="background:none; border:none; color:var(--primary); font-size:1rem; cursor:pointer; margin-left:0.5rem; padding:0.25rem; border-radius:50%; transition:background 0.2s;"
                    title="Â¿Para quÃ© sirven estas herramientas?">â“</button>
        </h2>

      <p style="color: var(--text-light); margin-bottom: 1.5rem;">
        Pega o escribe cualquier nÃºmero (ej: 1111783.99) y lo convertiremos automÃ¡ticamente a formato venezolano: <strong>1.111.783,99</strong>.
      </p>
      <label for="inputNumero">NÃºmero sin formato:</label>
      <input type="text" id="inputNumero" placeholder="Ej: 1111783.99 o 1.111.783,99" 
             style="width:100%; padding:1rem; font-size:1.1rem; margin-bottom:1rem; border:1px solid #ccc; border-radius:8px;">
      <div style="background:var(--card-bg); padding:1.25rem; border-radius:8px; border:1px solid #eee; margin-bottom:1.5rem;">
        <label>Formateado (Venezuela):</label>
        <div id="numeroFormateado" style="font-family:'Space Mono', monospace; font-size:1.5rem; font-weight:600; color:var(--primary); padding:1rem; background:#f9f9f9; border-radius:6px; margin-top:0.5rem;">
          0,00
        </div>
      </div>
      <div style="display:flex; gap:0.75rem; margin-bottom:1.5rem;">
        <button onclick="copiarFormateado()" style="flex:1; background:#0b57d0; color:white; border:none; border-radius:8px; padding:1rem; font-size:1rem;">ğŸ“‹ Copiar al Portapapeles</button>
        <button onclick="usarEnCantidad()" style="flex:1; background:#018642; color:white; border:none; border-radius:8px; padding:1rem; font-size:1rem;">ğŸ’¸ Usar en Cantidad</button>
        <button onclick="usarEnSaldoInicial()" style="flex:1; background:#ff9800; color:white; border:none; border-radius:8px; padding:1rem; font-size:1rem;">ğŸ¦ Usar en Saldo Inicial</button>
      </div>
      <p style="font-size:0.85rem; color:var(--text-light); text-align:center;">
        âš ï¸ Esta herramienta no guarda datos. Solo te ayuda a formatear antes de agregar un movimiento.
      </p>
    </section>

   <!-- âœ… NUEVA HERRAMIENTA: CÃLCULO DE EQUIVALENTE -->
<section style="margin-top: 2rem; padding-top: 1.5rem; border-top: 1px solid var(--text-light);">
  <h2>ğŸ“Š Calculadora de Equivalente</h2>
  <p style="color: var(--text-light); margin-bottom: 1rem;">
    Usa el saldo de <strong>Disponibilidad Total</strong> (de la pestaÃ±a Dashboard) y conviÃ©rtelo a otra moneda.
  </p>

  <div style="display:flex; gap:1rem; align-items:center; margin-bottom:1rem;">
    <label style="flex:1; font-size:0.875rem; color:var(--text-light);">
      Convertir a:
      <select id="monedaHerramienta" style="width:100%; padding:0.75rem; border-radius:8px; border:1px solid #ccc; margin-top:0.5rem;">
        <option value="USD">DÃ³lar (USD)</option>
        <option value="EUR">Euro (EUR)</option>
        <option value="COP">Peso Colombiano (COP)</option>
        <option value="ARS">Peso Argentino (ARS)</option>
        <option value="MXN">Peso Mexicano (MXN)</option>
      </select>
    </label>
  </div>

  <label for="tasaHerramienta">Tasa del dÃ­a (Bs):</label>
  <input type="text" id="tasaHerramienta" 
         placeholder="Ej: 169,98 o 8333,33" 
         style="width:100%; padding:1rem; border:1px solid #ccc; border-radius:8px; font-size:1rem; margin-bottom:1rem;"
         title="Ingresa la tasa como la ves en tu app de banco: 169,98, 8.333,33, 8333.33 â€” Â¡no se formatea!" />

  <div style="display:flex; gap:0.75rem; margin-bottom:1.5rem;">
    <button id="btnCalcularEquivalente" style="flex:1; background:#0b57d0; color:white; border:none; border-radius:8px; padding:1rem; font-size:1rem;">ğŸ“Š Calcular Equivalente</button>
    <button id="btnLimpiarEquivalente" style="flex:1; background:#ff9800; color:white; border:none; border-radius:8px; padding:1rem; font-size:1rem;">ğŸ§¹ Limpiar</button>
  </div>

  <div style="background:var(--card-bg); padding:1.5rem; border-radius:8px; border:1px solid #eee; margin-bottom:1.5rem;">
    <label>Equivalente:</label>
    <div id="equivalenteHerramienta" style="font-family:'Space Mono', monospace; font-size:1.8rem; font-weight:600; color:var(--primary); padding:1rem; background:#f9f9f9; border-radius:6px; margin-top:0.5rem;">
      --
    </div>
  </div>

  <p style="font-size:0.85rem; color:var(--text-light);">
    ğŸ“Œ Esta herramienta toma el saldo de <strong>Disponibilidad Total</strong> (Bs. <code id="totalGeneral">0,00</code>) de la pestaÃ±a Dashboard.  
    No depende de tu tasa guardada en el dashboard.  
    Â¡Tienes control total!
  </p>

</section>
</div> <!-- cierre sidebar-content -->
</div>

<!-- CALENDARIO DE MOVIMIENTOS-->
<div class="side-content" id="side-calendario">
  <div class="sidebar-content">
    <section>

    <h2>ğŸ“… Calendario de Movimientos</h2>
    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:1rem;">
      <button onclick="cambiarMes(-1)" style="padding:0.5rem 1rem; background:#0b57d0; color:white; border:none; border-radius:8px; font-size:1rem;">â† Mes anterior</button>
      <h3 id="mesActual" style="font-size:1.5rem; font-weight:600; color:var(--text);">Abril 2025</h3>
      <button onclick="cambiarMes(1)" style="padding:0.5rem 1rem; background:#0b57d0; color:white; border:none; border-radius:8px; font-size:1rem;">Mes siguiente â†’</button>
    </div>
    <div id="calendario" style="display:grid; grid-template-columns: repeat(7, 1fr); gap:0.25rem; margin-bottom:1.5rem; font-size:0.85rem;">
      <!-- Se rellena dinÃ¡micamente -->
    </div>
    
    <div id="detallesDia" style="background:var(--card-bg); padding:1rem; border-radius:8px; border:1px solid #eee; display:none; margin-top:1rem;">
  <!-- âœ… Eliminamos el tÃ­tulo de fecha -->
  <ul id="listaMovimientosDia" style="list-style:none; padding:0; margin:0;"></ul>
</div>

</section>
</div> <!-- cierre sidebar-content -->
</div>

<!-- INVERSIONES-->
<div class="side-content" id="side-inversiones">
  <div class="sidebar-content">
    <section>
      <h2>Simulador de Inversiones 
        <button onclick="mostrarAyudaInversiones()" 
                style="background:none; border:none; color:var(--primary); font-size:1rem; cursor:pointer; margin-left:0.5rem; padding:0.25rem; border-radius:50%; transition:background 0.2s;"
                title="Â¿CÃ³mo funciona el simulador de inversiones?">â“</button>
      </h2>
      <p style="color: var(--text-light); margin-bottom: 1rem;">
        Simula inversiones en acciones, criptomonedas o fondos. Los precios se actualizan automÃ¡ticamente.
      </p>

      <!-- Formulario para agregar nueva inversiÃ³n -->
      <div style="background: var(--card-bg); padding: 1.5rem; border-radius: var(--radius); margin-bottom: 1.5rem;">
        <h3 style="margin-top: 0;">Agregar InversiÃ³n</h3>
        <label for="activoInversion">Activo (ej: AAPL, BTC):</label>
        <input type="text" id="activoInversion" placeholder="SÃ­mbolo del activo" />

        <label for="cantidadInvertida">Cantidad invertida (Bs):</label>
        <input type="text" id="cantidadInvertida" placeholder="Ej: 1000" />

        <label for="fechaInversion">Fecha de inversiÃ³n:</label>
        <input type="date" id="fechaInversion" />

        <label for="tipoActivo">Tipo de activo:</label>
        <select id="tipoActivo">
          <option value="accion">AcciÃ³n</option>
          <option value="cripto">Criptomoneda</option>
          <option value="fondo">Fondo de inversiÃ³n</option>
        </select>

        <button onclick="agregarInversion()">Agregar InversiÃ³n</button>
      </div>

      <!-- Lista de inversiones actuales -->
      <div>
        <h3>Mis Inversiones</h3>
        <ul id="listaInversiones"></ul>
      </div>

      <!-- GrÃ¡fico de rendimiento -->
      <div style="margin-top: 2rem;">
        <h3>Rendimiento</h3>
        <canvas id="graficoInversiones" style="max-width: 100%; height: 300px;"></canvas>
      </div>
    </section>
  </div>
</div>

<!-- DEUDAS Y PRÃ‰STAMOS-->
<div class="side-content" id="side-deudas">
  <div class="sidebar-content">
    <section id="registroDeuda">
      <h2>ğŸ’° Registrar Nueva Deuda/PrÃ©stamo
        <button onclick="mostrarAyudaDeudas()" 
                style="background:none; border:none; color:var(--primary); font-size:1rem; cursor:pointer; margin-left:0.5rem; padding:0.25rem; border-radius:50%; transition:background 0.2s;"
                title="Â¿CÃ³mo gestionar deudas y prÃ©stamos?">â“</button>
      </h2>

      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
        <label>
          <input type="radio" name="tipoDeuda" value="debo" checked> Le debo a alguien
        </label>
        <label>
          <input type="radio" name="tipoDeuda" value="me_deben"> Alguien me debe
        </label>
      </div>

      <input type="text" id="nombreDeudor" placeholder="Nombre de la persona/entidad" style="width: 100%; padding: 0.75rem; border: 1px solid #ccc; border-radius: 8px; font-size: 1rem; margin-bottom: 1rem;" />

      <input type="text" id="montoDeuda" placeholder="Monto (ej: 50.00)" style="width: 100%; padding: 0.75rem; border: 1px solid #ccc; border-radius: 8px; font-size: 1rem; margin-bottom: 1rem;" />

      <select id="monedaDeuda" style="width: 100%; padding: 0.75rem; border: 1px solid #ccc; border-radius: 8px; font-size: 1rem; margin-bottom: 1rem;">
        <option value="USD">DÃ³lar (USD)</option>
        <option value="EUR">Euro (EUR)</option>
        <option value="VES">BolÃ­var (VES)</option>
      </select>

      <input type="date" id="fechaDeuda" style="width: 100%; padding: 0.75rem; border: 1px solid #ccc; border-radius: 8px; font-size: 1rem; margin-bottom: 1rem;" />

      <label style="display: block; margin-bottom: 0.5rem;">
        <input type="checkbox" id="tieneInteres"> Tiene interÃ©s (% anual)
      </label>
      
      <div id="camposInteres" style="display: none; margin-bottom: 1rem;">
        <input type="number" id="tasaInteres" placeholder="Tasa de interÃ©s (%)" step="0.01" min="0" style="width: 100%; padding: 0.75rem; border: 1px solid #ccc; border-radius: 8px; font-size: 1rem;" />
      </div>

      <label style="display: block; margin-bottom: 0.5rem;">
        <input type="checkbox" id="tieneFechaVencimiento"> Tiene fecha de vencimiento
      </label>
      
      <div id="camposVencimiento" style="display: none; margin-bottom: 1rem;">
        <input type="date" id="fechaVencimiento" style="width: 100%; padding: 0.75rem; border: 1px solid #ccc; border-radius: 8px; font-size: 1rem;" />
      </div>

      <textarea id="descripcionDeuda" placeholder="DescripciÃ³n/observaciones (opcional)" style="width: 100%; padding: 0.75rem; border: 1px solid #ccc; border-radius: 8px; font-size: 1rem; margin-bottom: 1rem; min-height: 80px; resize: vertical;"></textarea>

      <div style="display: flex; gap: 0.75rem;">
        <button onclick="guardarDeuda()" style="flex: 1; background: #0b57d0; color: white; border: none; border-radius: 8px; padding: 0.75rem; font-size: 1rem;">ğŸ’¾ Guardar Deuda</button>
        <button onclick="limpiarFormularioDeuda()" style="flex: 1; background: #6b7280; color: white; border: none; border-radius: 8px; padding: 0.75rem; font-size: 1rem;">ğŸ§¹ Limpiar</button>
      </div>
    </section>

    <section id="listaDeudas">
      <h2>ğŸ“‹ Mis Deudas/PrÃ©stamos</h2>
      <div id="filtrosDeudas" style="margin-bottom: 1rem;">
        <select id="filtroEstadoDeuda" style="margin-right: 0.5rem; padding: 0.5rem; border: 1px solid #ccc; border-radius: 6px;">
          <option value="">Todas las deudas</option>
          <option value="pendiente">Pendientes</option>
          <option value="pagada">Pagadas</option>
          <option value="vencida">Vencidas</option>
        </select>
        <select id="filtroTipoDeuda" style="padding: 0.5rem; border: 1px solid #ccc; border-radius: 6px;">
          <option value="">Todos los tipos</option>
          <option value="debo">Debo dinero</option>
          <option value="me_deben">Me deben dinero</option>
        </select>
      </div>
      <div id="contenedorDeudas">
        <!-- Las deudas se cargarÃ¡n dinÃ¡micamente aquÃ­ -->
      </div>
    </section>

    <section id="resumenDeudas">
      <h2>ğŸ“Š Resumen de Deudas</h2>
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
        <div style="background: var(--card-bg); padding: 1rem; border-radius: var(--radius); text-align: center;">
          <p style="color: var(--text-light); margin: 0 0 0.5rem 0;">Total que debo</p>
          <p style="font-size: 1.5rem; font-weight: 600; color: var(--danger); margin: 0;">Bs. <span id="totalDebo">0,00</span></p>
        </div>
        <div style="background: var(--card-bg); padding: 1rem; border-radius: var(--radius); text-align: center;">
          <p style="color: var(--text-light); margin: 0 0 0.5rem 0;">Total que me deben</p>
          <p style="font-size: 1.5rem; font-weight: 600; color: var(--success); margin: 0;">Bs. <span id="totalMeDeben">0,00</span></p>
        </div>
      </div>
    </section>

    <section id="alertasDeudas">
      <h2>ğŸš¨ Alertas de Vencimiento</h2>
      <div id="contenedorAlertas">
        <p style="color: var(--text-light); text-align: center; font-style: italic;">No hay alertas pendientes</p>
      </div>
    </section>

    <section id="calculadoraIntereses">
      <h2>ğŸ§® Calculadora de Intereses</h2>
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
        <div>
          <label>Capital:</label>
          <input type="text" id="capitalInteres" placeholder="1000" style="width: 100%; padding: 0.5rem; border: 1px solid #ccc; border-radius: 6px;" />
        </div>
        <div>
          <label>Tasa anual (%):</label>
          <input type="number" id="tasaInteresCalc" placeholder="12" step="0.01" style="width: 100%; padding: 0.5rem; border: 1px solid #ccc; border-radius: 6px;" />
        </div>
      </div>
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
        <div>
          <label>PerÃ­odo (aÃ±os):</label>
          <input type="number" id="periodoInteres" placeholder="1" step="0.01" min="0" style="width: 100%; padding: 0.5rem; border: 1px solid #ccc; border-radius: 6px;" />
        </div>
        <div>
          <label>Monto final:</label>
          <input type="text" id="montoFinalInteres" readonly style="width: 100%; padding: 0.5rem; background: var(--card-bg); border: 1px solid #ccc; border-radius: 6px;" />
        </div>
      </div>
      <button onclick="calcularIntereses()" style="width: 100%; background: var(--primary); color: white; border: none; border-radius: 8px; padding: 0.75rem; font-size: 1rem;">ğŸ“Š Calcular Intereses</button>
    </section>

    <section id="exportarDeudas">
      <h2>ğŸ“„ Exportar Plan de Pagos</h2>
      <div style="margin-bottom: 1rem;">
        <label>Seleccionar deuda:</label>
        <select id="deudaParaPlan" style="width: 100%; padding: 0.75rem; border: 1px solid #ccc; border-radius: 8px; font-size: 1rem;">
          <option value="">Selecciona una deuda</option>
        </select>
      </div>
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
        <div>
          <label>NÃºmero de pagos:</label>
          <input type="number" id="numPagos" placeholder="12" min="1" style="width: 100%; padding: 0.5rem; border: 1px solid #ccc; border-radius: 6px;" />
        </div>
        <div>
          <label>Frecuencia:</label>
          <select id="frecuenciaPagos" style="width: 100%; padding: 0.5rem; border: 1px solid #ccc; border-radius: 6px;">
            <option value="mensual">Mensual</option>
            <option value="quincenal">Quincenal</option>
            <option value="semanal">Semanal</option>
          </select>
        </div>
      </div>
      <button onclick="generarPlanPagosPDF()" style="width: 100%; background: #059669; color: white; border: none; border-radius: 8px; padding: 0.75rem; font-size: 1rem;">ğŸ“„ Generar PDF</button>
    </section>
  </div>
</div>

<!-- Cambios y actualizaciones-->
<div class="side-content" id="side-cambios">
  <div class="sidebar-content">
    <section id="cambios">

    <h2>Cambios y Actualizaciones</h2>

    <p style="text-align: center; margin-bottom: 1.5rem; font-size: 0.875rem; color: var(--text-light);">
      VersiÃ³n actual del sistema: <span id="versionActual" style="font-weight: 600; color: var(--primary);">1.0.4</span>
  </p>

    <ul>
      <li>VersiÃ³n 1.0.1: CorrecciÃ³n de errores en el modo literal de entrada de nÃºmeros.</li>
      <li>VersiÃ³n 1.0.2: Mejora en la interfaz de usuario para la gestiÃ³n de movimientos.</li>
      <li>VersiÃ³n 1.0.3: Mejoras en el diseÃ±o general del sistema.</li>
      <li>VersiÃ³n 1.0.3: RediseÃ±o del menÃº lateral de pestaÃ±as</li>
      <li>VersiÃ³n 1.0.3: Mejoras visuales de los datos en la pestaÃ±as "Presupuesto" y "Calendario".</li>
      <li>VersiÃ³n 1.0.3: Buscador del Dasboard completamente funcional.</li>
      <li>VersiÃ³n 1.0.3: CategorÃ­as y bancos en orden alfabÃ©tico.</li>
      <!-- AÃ±ade mÃ¡s elementos segÃºn sea necesario -->
    </ul>

  </section>
</div> <!-- cierre sidebar-content -->
</div>

<div class="side-content" id="side-config">
  <div class="sidebar-content">
    <section id="panelReglas">

      <div style="text-align: center; margin-bottom: 1.5rem; padding: 1rem; background: var(--card-bg); border-radius: var(--radius); border: 1px solid var(--text-light);">
        <h3 style="margin: 0 0 0.5rem 0; color: var(--text);">Sistema de Finanzas Personales</h3>
        <p style="margin: 0; font-size: 0.875rem; color: var(--text-light);">
            VersiÃ³n <span id="versionConfig" style="font-weight: 600; color: var(--primary);">1.0.4</span>
        </p>
      </div>

      <h2>Reglas de automatizaciÃ³n 
        <button onclick="mostrarAyudaConfiguracion()" 
                style="background:none; border:none; color:var(--primary); font-size:1rem; cursor:pointer; margin-left:0.5rem; padding:0.25rem; border-radius:50%; transition:background 0.2s;"
                title="Â¿CÃ³mo configurar reglas y categorÃ­as?">â“</button>
    </h2>

        <ul id="listaReglas"></ul>

        <!-- âœ… NUEVA SECCIÃ“N: Editar CategorÃ­as -->
  <details>
    <summary>âœï¸ Editar categorÃ­a</summary>
    <ul id="listaCategoriasEditables" style="margin: 0.5rem 0; padding-left: 1rem;"></ul>
    <button onclick="agregarCategoria()" style="margin-top: 0.5rem; width:100%;">â• Nueva categorÃ­a</button>
  </details>

  <!-- âœ… NUEVA SECCIÃ“N: Editar Bancos -->
  <details>
    <summary>âœï¸ Editar banco</summary>
    <ul id="listaBancosEditables" style="margin: 0.5rem 0; padding-left: 1rem;"></ul>
    <button onclick="agregarBanco()" style="margin-top: 0.5rem; width:100%;">â• Nuevo banco</button>
  </details>

        <!-- ELIMINAR CATEGORÃAS -->
        <details>
          <summary>ğŸ—‘ï¸ Eliminar categorÃ­a</summary>
          <select id="selectEliminarCategoria">
            <option value="">Selecciona una categorÃ­a</option>
          </select>
          <button onclick="eliminarCategoria()">Eliminar</button>
        </details>

        <!-- ELIMINAR BANCOS -->
        <details>
          <summary>ğŸ—‘ï¸ Eliminar banco</summary>
          <select id="selectEliminarBanco">
            <option value="">Selecciona un banco</option>
          </select>
          <button onclick="eliminarBanco()">Eliminar</button>
        </details>

        <!-- ELIMINAR SALDO INICIAL -->
        <details>
          <summary>ğŸ—‘ï¸ Eliminar saldo inicial</summary>
          <button onclick="eliminarSaldoInicial()">Eliminar saldo inicial</button>
        </details>

        <!-- NUEVA REGLA -->
        <details>
          <summary>â• Nueva regla</summary>
          <input type="text" id="txtPalabra" placeholder="Palabra clave (ej. netflix)" />
          <input type="text" id="txtCat" placeholder="CategorÃ­a a asignar" />
          <label>Banco objetivo:
            <select id="txtBancoRegla">
              <option value="">Cualquier banco</option>
              <option value="Otro">+ Nuevoâ€¦</option>
            </select>
          </label>
          <input type="text" id="nuevoBancoRegla" placeholder="Nombre del banco" style="display:none;" />
          <button onclick="agregarRegla()">Guardar regla</button>
        </details>

              <!-- BLOQUEO DE SEGURIDAD -->
              <details style="margin-top: 1.5rem;">
        <summary>ğŸ”’ Bloqueo de App (PIN)</summary>
        <p style="color: var(--text-light); margin-bottom: 1rem;">
          Activa un bloqueo con PIN para proteger tu app. Solo tÃº podrÃ¡s acceder.
        </p>
        <div style="margin-bottom: 1rem;">
          <label>
            <input type="checkbox" id="bloqueoActivo" />
            Activar bloqueo de app
          </label>
        </div>
        <div id="bloqueoPINContainer" style="display: none; margin-top: 1rem; padding: 1rem; background: var(--card-bg); border-radius: var(--radius); border: 1px solid var(--text-light);">
          <label for="bloqueoPIN">Ingresa tu PIN de 4 dÃ­gitos:</label>
          <input type="password" id="bloqueoPIN" maxlength="4" minlength="4" placeholder="Ej: 1234" style="width:100%; margin-bottom:0.75rem;" />
          <label for="bloqueoPINConfirmar">Confirma tu PIN:</label>
          <input type="password" id="bloqueoPINConfirmar" maxlength="4" minlength="4" placeholder="Vuelve a ingresar" style="width:100%; margin-bottom:0.75rem;" />
          <button onclick="guardarPIN()" style="width:100%;">Guardar PIN</button>
          <button onclick="eliminarPIN()" style="width:100%; background:var(--danger); margin-top:0.5rem;">Eliminar PIN</button>
        </div>
        <p style="font-size:0.8rem; color:var(--text-light); margin-top:1rem;">
          âš ï¸ Si olvidas tu PIN, no podrÃ¡s acceder a tu app. <br>
          Â¡Guarda tu PIN en un lugar seguro!
        </p>
      </details>

      <!-- COPIA DE SEGURIDAD -->
      <details style="margin-top: 1.5rem;">
  <summary>ğŸ’¾ Copia de Seguridad</summary>
  <p style="color: var(--text-light); margin-bottom: 1rem;">
    Exporta o importa tu historial completo. Ideal para cambiar de dispositivo o recuperar datos.
  </p>
  <button onclick="exportarBackup()" style="width:100%; padding:1rem; margin-bottom:0.75rem; background:#0b57d0; color:white; border:none; border-radius:8px; font-size:1rem;">
    ğŸ“¤ Exportar Backup
  </button>
  <button onclick="importarBackup()" style="width:100%; padding:1rem; background:#018642; color:white; border:none; border-radius:8px; font-size:1rem;">
    ğŸ“¥ Importar Backup
  </button>

  <button onclick="repararApp()" style="width:100%; padding:1rem; margin-top:1rem; background:#ff9800; color:white; border:none; border-radius:8px; font-size:1rem;">
    ğŸ› ï¸ Reparar VisualizaciÃ³n (Firefox/Chrome)
  </button>
  </details>

  <!-- MODO DE ENTRADA -->
  <details style="margin-top: 1.5rem;">
  <summary>ğŸ”¢ Modo de Entrada de NÃºmeros</summary>
  <p style="color: var(--text-light); margin-bottom: 1rem;">
    Elige cÃ³mo deseas ingresar cantidades en los campos de "Cantidad" y "Saldo Inicial".
  </p>
  <div style="margin-bottom: 1rem;">
    <label>
      <input type="radio" name="numeroModo" value="automatico" id="modoAutomatico" checked />
      <strong>âœ… AutomÃ¡tico (recomendado)</strong><br>
      <small>El sistema convierte automÃ¡ticamente: <code>110.88</code> â†’ <code>11.088,00</code></small>
    </label>
  </div>
  <div style="margin-bottom: 1rem;">
    <label>
      <input type="radio" name="numeroModo" value="literal" id="modoLiteral" />
      <strong>ğŸ“ Literal (ingresa tal cual)</strong><br>
      <small>Guarda exactamente lo que escribas: <code>110.88</code> â†’ <code>110.88</code> (sin formateo)</small>
    </label>
  </div>
  <p style="font-size:0.8rem; color:var(--text-light); margin-top:0.75rem;">
    âš ï¸ En modo literal, no se aplicarÃ¡ formateo ni validaciÃ³n automÃ¡tica.  
    AsegÃºrate de usar solo puntos (.) como separador decimal, y no comas (,).
  </p>
</details>


  <!-- ELIMINAR TODOS LOS MOVIMIENTOS -->
  <details style="margin-top: 1.5rem; color: #b00020;">
  <summary style="color: #b00020;">âš ï¸ Eliminar todos los movimientos</summary>
  <p style="font-size:0.85rem; color:var(--text-light); margin-bottom:0.75rem;">
    âš ï¸ Â¡ADVERTENCIA! Esto eliminarÃ¡ TODOS tus movimientos (ingresos, gastos, saldos iniciales).  
    Esto NO borra tus categorÃ­as, bancos, reglas, tasa o backup.  
    Solo los movimientos.
  </p>
  <button onclick="eliminarTodosLosMovimientos()" style="width:100%; padding:1rem; background:#b00020; color:white; border:none; border-radius:8px; font-size:1rem;">
    ğŸ—‘ï¸ Eliminar TODOS los movimientos
  </button>
</details>

</section>
</div> <!-- cierre sidebar-content -->
</div>

  <script src="chart.umd.min.js?v=20250930"></script>
  <script src="xlsx.full.min.js?v=20250930"></script>
  <script src="equivalente-calculator.js"></script>
  <script src="app.js?v=20250930"></script>
  
  
  <!-- Modal de bloqueo -->
  <div id="modalBloqueo" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:1001; justify-content:center; align-items:center;">
  <div style="background:var(--card-bg); border-radius:var(--radius); box-shadow:var(--shadow-lg); padding:2rem; width:90%; max-width:350px; text-align:center;">
    <h2>ğŸ”’ Bloqueo de App</h2>
    <p style="color:var(--text-light); margin-bottom:1.5rem;">Ingresa tu PIN de 4 dÃ­gitos para acceder.</p>
    <input type="password" id="pinInput" maxlength="4" minlength="4" placeholder="PIN de 4 dÃ­gitos" 
           style="width:100%; padding:1rem; font-size:1.5rem; text-align:center; margin-bottom:1.5rem; border:1px solid var(--text-light); border-radius:8px;"
           title="Escribe 'reset' si olvidaste tu PIN (solo para recuperaciÃ³n)">
    <button onclick="desbloquearApp()" style="width:100%; padding:1rem; font-size:1rem; background:#0b57d0; color:white; border:none; border-radius:8px;">Desbloquear</button>
    <button onclick="cerrarModalBloqueo()" style="width:100%; padding:0.75rem; margin-top:1rem; background:var(--danger); color:white; border:none; border-radius:8px; font-size:0.9rem;">Cancelar</button>
    <p id="avisoPinOlvidado" style="font-size:0.75rem; color:var(--text-light); margin-top:1.5rem; font-style:italic; display:none;">
      âš ï¸ Â¿Olvidaste tu PIN? Escribe <strong>"reset"</strong> para desactivar el bloqueo.
    </p>
  </div>
  </div>

  <!-- Toast -->
  <div id="toast-container">
  </div>

<div id="custom-confirm" class="custom-modal-overlay">
  <div class="custom-modal-content">
    <p id="confirm-message" style="font-weight: 500;"></p>
    <div class="confirm-actions">
      <button id="confirm-cancel" class="btn-cancelar">Cancelar</button>
      <button id="confirm-ok" class="btn-aceptar">Aceptar</button>
    </div>
  </div>

</div>

</div>

<!-- MODAL DE AYUDA (PRESUPUESTO)-->
<div id="modalAyudaPresupuesto" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); z-index:1002; justify-content:center; align-items:center;">
  <div style="background:var(--card-bg); border-radius:var(--radius); box-shadow:var(--shadow-lg); padding:2rem; width:90%; max-width:500px; max-height:80vh; overflow-y:auto; position:relative;">
    <button onclick="cerrarAyudaPresupuesto()" 
            style="position:absolute; top:1rem; right:1rem; background:none; border:none; font-size:1.5rem; color:var(--text-light); cursor:pointer; padding:0.5rem; border-radius:50%; transition:background 0.2s;"
            title="Cerrar">âœ•</button>
    
    <h2 style="color:var(--primary); margin-bottom:1.5rem; text-align:center;">ğŸ¯ Â¿CÃ³mo funciona la pestaÃ±a Presupuesto?</h2>
    
    <div style="margin-bottom:1.5rem;">
      <h3 style="color:var(--text); margin-bottom:0.75rem;">ğŸ“Š Â¿QuÃ© puedes hacer aquÃ­?</h3>
      <ul style="color:var(--text-light); line-height:1.6; margin:0; padding-left:1.5rem;">
        <li><strong>Definir meta mensual:</strong> Establece tu presupuesto objetivo para el mes</li>
        <li><strong>Visualizar progreso:</strong> Ve quÃ© porcentaje has gastado de tu meta</li>
        <li><strong>AnÃ¡lisis detallado:</strong> Revisa gastos por categorÃ­a en los Ãºltimos 30 dÃ­as</li>
        <li><strong>Control total:</strong> Guarda, elimina o modifica tu meta cuando quieras</li>
      </ul>
    </div>
    
    <div style="margin-bottom:1.5rem;">
      <h3 style="color:var(--text); margin-bottom:0.75rem;">ğŸ’¡ Consejos Ãºtiles</h3>
      <ul style="color:var(--text-light); line-height:1.6; margin:0; padding-left:1.5rem;">
        <li>Define una meta realista basada en tus gastos histÃ³ricos</li>
        <li>Revisa frecuentemente el progreso para mantenerte en control</li>
        <li>Usa las categorÃ­as para identificar Ã¡reas de mayor gasto</li>
        <li>Ajusta tu meta mensualmente segÃºn tus necesidades</li>
      </ul>
    </div>
    
    <div style="background:var(--success-bg); padding:1rem; border-radius:8px; border-left:4px solid var(--success); margin-top:1.5rem;">
      <p style="margin:0; color:var(--success-text); font-size:0.875rem;">
        <strong>ğŸ‰ Pro tip:</strong> Una buena meta de presupuesto es entre el 50-70% de tus ingresos mensuales, dejando espacio para imprevistos.
      </p>
    </div>
    
  </div>
</div>

<!-- MODAL DE AYUDA (INVERSIONES)-->
<div id="modalAyudaInversiones" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); z-index:1003; justify-content:center; align-items:center;">
  <div style="background:var(--card-bg); border-radius:var(--radius); box-shadow:var(--shadow-lg); padding:2rem; width:90%; max-width:500px; max-height:80vh; overflow-y:auto; position:relative;">
    <button onclick="cerrarAyudaInversiones()" 
            style="position:absolute; top:1rem; right:1rem; background:none; border:none; font-size:1.5rem; color:var(--text-light); cursor:pointer; padding:0.5rem; border-radius:50%; transition:background 0.2s;"
            title="Cerrar">âœ•</button>
    
    <h2 style="color:var(--primary); margin-bottom:1.5rem; text-align:center;">ğŸ“ˆ Â¿CÃ³mo funciona el Simulador de Inversiones?</h2>
    
    <div style="margin-bottom:1.5rem;">
      <h3 style="color:var(--text); margin-bottom:0.75rem;">ğŸ¯ Â¿QuÃ© es esto?</h3>
      <p style="color:var(--text-light); line-height:1.6; margin:0 0 1rem 0;">
        <strong>Â¡Es un simulador educativo!</strong> No inviertes dinero real, solo simulas inversiones para aprender y experimentar con diferentes estrategias.
      </p>
      <ul style="color:var(--text-light); line-height:1.6; margin:0; padding-left:1.5rem;">
        <li><strong>Precios simulados:</strong> Los precios cambian automÃ¡ticamente cada vez que actualizas</li>
        <li><strong>Sin riesgo:</strong> Puedes experimentar con diferentes activos sin perder dinero</li>
        <li><strong>Educativo:</strong> Perfecto para aprender conceptos de inversiÃ³n</li>
        <li><strong>GrÃ¡ficos reales:</strong> Visualiza el rendimiento con grÃ¡ficos profesionales</li>
      </ul>
    </div>
    
    <div style="margin-bottom:1.5rem;">
      <h3 style="color:var(--text); margin-bottom:0.75rem;">ğŸ“Š Â¿QuÃ© puedes hacer aquÃ­?</h3>
      <ul style="color:var(--text-light); line-height:1.6; margin:0; padding-left:1.5rem;">
        <li><strong>Agregar inversiones:</strong> Simula compra de acciones, cripto o fondos</li>
        <li><strong>Seguimiento automÃ¡tico:</strong> Los precios se actualizan periÃ³dicamente</li>
        <li><strong>AnÃ¡lisis visual:</strong> Ve grÃ¡ficos de rendimiento y ganancias/pÃ©rdidas</li>
        <li><strong>Portafolio simulado:</strong> Gestiona mÃºltiples inversiones como en la vida real</li>
      </ul>
    </div>
    
    <div style="margin-bottom:1.5rem;">
      <h3 style="color:var(--text); margin-bottom:0.75rem;">ğŸ’¡ Consejos para usar el simulador</h3>
      <ul style="color:var(--text-light); line-height:1.6; margin:0; padding-left:1.5rem;">
        <li>Empieza con cantidades pequeÃ±as para experimentar</li>
        <li>Prueba diferentes tipos de activos (acciones, cripto, fondos)</li>
        <li>Observa cÃ³mo cambian los precios y afecta tu portafolio</li>
        <li>Usa fechas diferentes para simular inversiones a largo plazo</li>
      </ul>
    </div>
    
    <div style="background:var(--warning-bg); padding:1rem; border-radius:8px; border-left:4px solid var(--warning); margin-top:1.5rem;">
      <p style="margin:0; color:var(--warning-text); font-size:0.875rem;">
        <strong>âš ï¸ Recordatorio:</strong> Esto es solo un simulador educativo. No refleja inversiones reales ni precios de mercado actuales. Â¡Es perfecto para aprender sin riesgos!
      </p>
    </div>
    
  </div>
</div>

</body>
</html>
